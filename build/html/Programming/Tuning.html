

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tuning &mdash; RaidOne  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Making the Robot Move Autonomously" href="MovingAuto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> RaidOne
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Intro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Electrical</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Electrical/ElectricalGuide.html">Electrical Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Electrical/GoodWiring.html">Good Wiring Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="CodeSetup.html">Code Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="CodeOrganization.html">Code Organization</a></li>
<li class="toctree-l1"><a class="reference internal" href="MovingTeleop.html">Making the Robot Move in Teleop</a></li>
<li class="toctree-l1"><a class="reference internal" href="IntroPID.html">Introduction to PID</a></li>
<li class="toctree-l1"><a class="reference internal" href="MovingAuto.html">Making the Robot Move Autonomously</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tuning</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">RaidOne</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Tuning</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Programming/Tuning.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tuning">
<h1>Tuning<a class="headerlink" href="#tuning" title="Permalink to this headline">¶</a></h1>
<p>Oh no! The bot doesn’t move! That’s because you need to tune.</p>
<div class="section" id="setting-up-the-code">
<h2>Setting up the code:<a class="headerlink" href="#setting-up-the-code" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Set the path as a long (~half the field) straight line.</p></li>
<li><p>Go to <code class="docutils literal notranslate"><span class="pre">Constants.java</span></code> and change <code class="docutils literal notranslate"><span class="pre">Constants.AutoConstants.MAX_VEL</span></code> and
<code class="docutils literal notranslate"><span class="pre">Constants.AutoConstants.MAX_ACCEL</span></code> to something reasonable (it really depends on how
fast the chassis is. But try to keep it at a safe speed)</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">Constants.ChassisConstants.kV</span></code> to a small number like <code class="docutils literal notranslate"><span class="pre">0.5</span></code></p></li>
</ol>
<p>Now you’re basically ready to go! But in order to tune effectively, we need to see how
the bot reacts to different inputs. Thus, we can use Glass to view velocity graphs.</p>
</div>
<div class="section" id="setting-up-glass">
<h2>Setting up Glass:<a class="headerlink" href="#setting-up-glass" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Open up WPIlib Glass</p></li>
<li><p>Configure these settings and click apply</p></li>
</ol>
<img alt="../_images/glass_setup.PNG" src="../_images/glass_setup.PNG" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure to change “Team/IP” to your correct team number</p>
</div>
<ol class="arabic simple" start="3">
<li><p>Go to “Plot” in the toolbar and select “New Plot Window”</p></li>
<li><p>Click “Add Plot”</p></li>
<li><p>Do steps 3 &amp; 4 twice to add 2 plots</p></li>
<li><p>From the “NetworkTables” tab, drag and drop “actual left vel” and “desired left vel” to
one of the plots and “actual right vel” and “desired right vel” to the other plot</p></li>
<li><p>Now, all the velocities will be graphed when you run the path.</p></li>
</ol>
</div>
<div class="section" id="running-the-code-and-tuning">
<h2>Running the Code and Tuning:<a class="headerlink" href="#running-the-code-and-tuning" title="Permalink to this headline">¶</a></h2>
<p>Now your ready to run the code!</p>
<p>Keep running the code until the max actual velocity is around the same place as the max
desired velocity.</p>
<img alt="../_images/untuned.PNG" src="../_images/untuned.PNG" />
<p>And then…</p>
<img alt="../_images/kv.PNG" src="../_images/kv.PNG" />
<p>Next we will tune the kA. Keep tuning the KA until the accerlation and deceleration parts of
the profile matches between the actual and desired velocities. It should end up like this:</p>
<img alt="../_images/ka.PNG" src="../_images/ka.PNG" />
<p>Next we will tune the kP. Keep tuning the kP until the actual graph matches the desired graph
even better.</p>
<img alt="../_images/kp.PNG" src="../_images/kp.PNG" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is okay if the robot does not drive straight. We will correct this later on.</p>
</div>
</div>
<div class="section" id="correcting-for-positional-error">
<h2>Correcting for Positional Error:<a class="headerlink" href="#correcting-for-positional-error" title="Permalink to this headline">¶</a></h2>
<p>What RAMSETE, a nonlinear state-space feedback controller, does is that it looks at the robot’s
current position and corrects its velocities based on the calculated error.</p>
<p>To add RAMSETE, go to <code class="docutils literal notranslate"><span class="pre">TrajectoryFollower.java</span></code>, and uncomment line 61 and comment line 62.</p>
<p>…. image:: ../images/ramsete.jpg</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="MovingAuto.html" class="btn btn-neutral float-left" title="Making the Robot Move Autonomously" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Jason.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>